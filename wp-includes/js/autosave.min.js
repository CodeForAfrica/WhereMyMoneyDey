window.autosave=function(){return!0},function(g,m){function w(t){var e=(new Date).getTime(),n=[],o="undefined"!=typeof tinymce&&tinymce.get("content");return o&&!o.isHidden()&&l<e-3e3&&(o.save(),l=e),e={post_id:g("#post_ID").val()||0,post_type:g("#post_type").val()||"",post_author:g("#post_author").val()||"",post_title:g("#title").val()||"",content:g("#content").val()||"",excerpt:g("#excerpt").val()||""},"local"===t||(g('input[id^="in-category-"]:checked').each(function(){n.push(this.value)}),e.catslist=n.join(","),(t=g("#post_name").val())&&(e.post_name=t),(t=g("#parent_id").val())&&(e.parent_id=t),g("#comment_status").prop("checked")&&(e.comment_status="open"),g("#ping_status").prop("checked")&&(e.ping_status="open"),"1"===g("#auto_draft").val()&&(e.auto_draft="1")),e}function h(t){return"object"==typeof t?(t.post_title||"")+"::"+(t.content||"")+"::"+(t.excerpt||""):(g("#title").val()||"")+"::"+(g("#content").val()||"")+"::"+(g("#excerpt").val()||"")}function a(){y.trigger("autosave-disable-buttons"),setTimeout(n,5e3)}function n(){y.trigger("autosave-enable-buttons")}function s(){i=!0,m.clearTimeout(t),t=m.setTimeout(function(){i=!1},1e4)}function o(){u=(new Date).getTime()+1e3*autosaveL10n.autosaveInterval||6e4}var _,i,t,r,c,u,p,l,y;m.wp=m.wp||{},m.wp.autosave=(l=0,(y=g(document)).on("tinymce-editor-init.autosave",function(t,e){"content"===e.id&&m.setTimeout(function(){e.save(),_=h()},1e3)}).ready(function(){_=h()}),{getPostData:w,getCompareString:h,disableButtons:a,enableButtons:n,local:function(){var s,i,n,r,o,a,c=!1;function u(){var t=!1;return t=o&&n?(t=sessionStorage.getItem("wp-autosave-"+n))?JSON.parse(t):{}:t}function p(){var t=u();return t&&r&&t["post_"+r]||!1}function l(t){var e=u();if(!e||!r)return!1;if(t)e["post_"+r]=t;else{if(!e.hasOwnProperty("post_"+r))return!1;delete e["post_"+r]}return t=e,!(!o||!n)&&(e="wp-autosave-"+n,sessionStorage.setItem(e,JSON.stringify(t)),null!==sessionStorage.getItem(e))}function v(t){var e,n;return!c&&(t?(e=p()||{},g.extend(e,t)):e=w("local"),(t=h(e))!==(a=void 0===a?_:a)&&(e.save_time=(new Date).getTime(),e.status=g("#post_status").val()||"",(n=l(e))&&(a=t),n))}function d(t,e){function n(t){return t.toString().replace(/[\x20\t\r\n\f]+/g,"")}return n(t||"")===n(e||"")}function t(){var t,e,n,o=p(),a=wpCookies.get("wp-saving-post-"+r);o&&(a&&(wpCookies.remove("wp-saving-post-"+r),"saved"===a)?l(!1):g("#has-newer-autosave").length||(t=g("#content").val()||"",e=g("#title").val()||"",n=g("#excerpt").val()||"","check"!==a&&d(t,o.content)&&d(e,o.post_title)&&d(n,o.excerpt)||(s=o,i={content:t,post_title:e,excerpt:n},n=g("#local-storage-notice"),g(".wrap h2").first().after(n.addClass("updated").show()),n.on("click.autosave-local",function(t){var e=g(t.target);e.hasClass("restore-backup")?(f(s),e.parent().hide(),g(this).find("p.undo-restore").show()):e.hasClass("undo-restore-backup")&&(f(i),e.parent().hide(),g(this).find("p.local-restore").show()),t.preventDefault()}))))}function f(t){var e;return t&&(a=h(t),g("#title").val()!==t.post_title&&g("#title").focus().val(t.post_title||""),g("#excerpt").val(t.excerpt||""),(e="undefined"!=typeof tinymce&&tinymce.get("content"))&&!e.isHidden()&&"undefined"!=typeof switchEditors?(e.undoManager.add(),e.setContent(t.content?switchEditors.wpautop(t.content):"")):(g("#content-html").click(),g("#content").val(t.content)),1)}if(n=void 0!==m.autosaveL10n&&m.autosaveL10n.blog_id,function(){var t=Math.random().toString(),e=!1;try{m.sessionStorage.setItem("wp-test",t),e=m.sessionStorage.getItem("wp-test")===t,m.sessionStorage.removeItem("wp-test")}catch(t){}return o=e}()&&n&&(g("#content").length||g("#excerpt").length))return y.ready(function(){r=g("#post_ID").val()||0,g("#wp-content-wrap").hasClass("tmce-active")?y.on("tinymce-editor-init.autosave",function(){m.setTimeout(function(){t()},1500)}):t(),m.setInterval(v,15e3),g("form#post").on("submit.autosave-local",function(){var t="undefined"!=typeof tinymce&&tinymce.get("content"),e=g("#post_ID").val()||0;t&&!t.isHidden()?t.on("submit",function(){v({post_title:g("#title").val()||"",content:g("#content").val()||"",excerpt:g("#excerpt").val()||""})}):v({post_title:g("#title").val()||"",content:g("#content").val()||"",excerpt:g("#excerpt").val()||""}),wpCookies.set("wp-saving-post-"+e,"check")})}),{hasStorage:o,getSavedPostData:p,save:v,suspend:function(){c=!0},resume:function(){c=!1}}}(),server:(u=0,p=!1,y.on("heartbeat-send.autosave",function(t,e){var n,o,n=!(p||i||!m.autosave())&&(!((new Date).getTime()<u)&&((o=h(n=w()))!==(c=void 0===c?_:c)&&(r=o,s(),a(),y.trigger("wpcountwords",[n.content]).trigger("before-autosave",[n]),n._wpnonce=g("#_wpnonce").val()||"",n)));n&&(e.wp_autosave=n)}).on("heartbeat-tick.autosave",function(t,e){e.wp_autosave&&(e=e.wp_autosave,o(),i=!1,c=r,r="",y.trigger("after-autosave",[e]),n(),e.success&&g("#auto_draft").val(""))}).on("heartbeat-connection-lost.autosave",function(t,e,n){"timeout"!==e&&603!==n||(n=g("#lost-connection-notice"),wp.autosave.local.hasStorage||n.find(".hide-if-no-sessionstorage").hide(),n.show(),a())}).on("heartbeat-connection-restored.autosave",function(){g("#lost-connection-notice").hide(),n()}).ready(function(){o()}),{tempBlockSave:s,triggerSave:function(){u=0,wp.heartbeat.connectNow()},postChanged:function(){return h()!==_},suspend:function(){p=!0},resume:function(){p=!1}})})}(jQuery,window);