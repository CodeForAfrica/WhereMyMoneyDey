var QTags,edCanvas,edButtons=[],edAddTag=function(){},edCheckOpenTags=function(){},edCloseAllTags=function(){},edInsertImage=function(){},edInsertLink=function(){},edInsertTag=function(){},edLink=function(){},edQuickLink=function(){},edRemoveTag=function(){},edShowButton=function(){},edShowLinks=function(){},edSpell=function(){},edToolbar=function(){};function quicktags(t){return new QTags(t)}function edInsertContent(t,n){return QTags.insertContent(n)}function edButton(t,n,e,o,a){return QTags.addButton(t,n,e,o,a,"",-1)}!function(){var t,s=function(t){var n,e,o,a;"undefined"!=typeof jQuery?jQuery(document).ready(t):((n=s).funcs=[],n.ready=function(){if(!n.isReady)for(n.isReady=!0,e=0;e<n.funcs.length;e++)n.funcs[e]()},n.isReady?t():n.funcs.push(t),n.eventAttached||(document.addEventListener?(o=function(){document.removeEventListener("DOMContentLoaded",o,!1),n.ready()},document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",n.ready,!1)):document.attachEvent&&(o=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),n.ready())},document.attachEvent("onreadystatechange",o),window.attachEvent("onload",n.ready),(a=function(){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(a,50)}n.ready()})()),n.eventAttached=!0))},n=(n=new Date,t=function(t){t=t.toString();return t=t.length<2?"0"+t:t},n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1)+"-"+t(n.getUTCDate())+"T"+t(n.getUTCHours())+":"+t(n.getUTCMinutes())+":"+t(n.getUTCSeconds())+"+00:00"),r=QTags=function(t){if("string"==typeof t)t={id:t};else if("object"!=typeof t)return!1;var n,e=this,o=t.id,a=document.getElementById(o),i="qt_"+o;if(!o||!a)return!1;e.name=i,e.id=o,e.canvas=a,e.settings=t,n="content"!==o||"string"!=typeof adminpage||"post-new-php"!==adminpage&&"post-php"!==adminpage?i+"_toolbar":(edCanvas=a,"ed_toolbar"),(t=document.createElement("div")).id=n,t.className="quicktags-toolbar",t.onclick=function(){window.wpActiveEditor=o},a.parentNode.insertBefore(t,a),n=function(t){var n=(t=t||window.event).target||t.srcElement;(n.clientWidth||n.offsetWidth)&&/ ed_button /.test(" "+n.className+" ")&&(e.canvas=a=document.getElementById(o),t=n.id.replace(i+"_",""),e.theButtons[t]&&e.theButtons[t].callback.call(e.theButtons[t],n,a,e))},(e.toolbar=t).addEventListener?t.addEventListener("click",n,!1):t.attachEvent&&t.attachEvent("onclick",n),e.getButton=function(t){return e.theButtons[t]},e.getButtonElement=function(t){return document.getElementById(i+"_"+t)},r.instances[o]=e,r.instances[0]||(r.instances[0]=r.instances[o],s(function(){r._buttonsInit()}))};r.instances={},r.getInstance=function(t){return r.instances[t]},r._buttonsInit=function(){var t,n,e,o,a,i,s,u,c,l=this;for(a in l.instances)if(0!==a){for(u in(i=l.instances[a]).canvas,t=i.name,e={},c=o="",(n=i.settings).buttons&&(c=","+n.buttons+","),edButtons)edButtons[u]&&(s=edButtons[u].id,c&&-1!==",strong,em,link,block,del,ins,img,ul,ol,li,code,more,close,".indexOf(","+s+",")&&-1===c.indexOf(","+s+",")||edButtons[u].instance&&edButtons[u].instance!==a||(e[s]=edButtons[u],edButtons[u].html&&(o+=edButtons[u].html(t+"_"))));c&&-1!==c.indexOf(",fullscreen,")&&(e.fullscreen=new r.FullscreenButton,o+=e.fullscreen.html(t+"_")),"rtl"===document.getElementsByTagName("html")[0].dir&&(e.textdirection=new r.TextDirectionButton,o+=e.textdirection.html(t+"_")),i.toolbar.innerHTML=o,i.theButtons=e}l.buttonsInitDone=!0},r.addButton=function(t,n,e,o,a,i,s,u){var c;if(t&&n){if(s=s||0,o=o||"","function"==typeof e)(c=new r.Button(t,n,a,i,u)).callback=e;else{if("string"!=typeof e)return;c=new r.TagButton(t,n,e,o,a,i,u)}if(-1===s)return c;if(0<s){for(;void 0!==edButtons[s];)s++;edButtons[s]=c}else edButtons[edButtons.length]=c;this.buttonsInitDone&&this._buttonsInit()}},r.insertContent=function(t){var n,e,o,a,i=document.getElementById(wpActiveEditor);return!!i&&(document.selection?(i.focus(),document.selection.createRange().text=t,i.focus()):i.selectionStart||0===i.selectionStart?(a=i.value,n=i.selectionStart,e=i.selectionEnd,o=i.scrollTop,i.value=a.substring(0,n)+t+a.substring(e,a.length),i.focus(),i.selectionStart=n+t.length,i.selectionEnd=n+t.length,i.scrollTop=o):(i.value+=t,i.focus()),!0)},r.Button=function(t,n,e,o,a){var i=this;i.id=t,i.display=n,i.access=e,i.title=o||"",i.instance=a||""},r.Button.prototype.html=function(t){var n=this.access?' accesskey="'+this.access+'"':"";return"fullscreen"===this.id?'<button type="button" id="'+t+this.id+'"'+n+' class="ed_button qt-fullscreen" title="'+this.title+'"></button>':'<input type="button" id="'+t+this.id+'"'+n+' class="ed_button button button-small" title="'+this.title+'" value="'+this.display+'" />'},r.Button.prototype.callback=function(){},r.TagButton=function(t,n,e,o,a,i,s){r.Button.call(this,t,n,a,i,s),this.tagStart=e,this.tagEnd=o},r.TagButton.prototype=new r.Button,r.TagButton.prototype.openTag=function(t,n){n.openTags||(n.openTags=[]),this.tagEnd&&(n.openTags.push(this.id),t.value="/"+t.value)},r.TagButton.prototype.closeTag=function(t,n){var e=this.isOpen(n);!1!==e&&n.openTags.splice(e,1),t.value=this.display},r.TagButton.prototype.isOpen=function(t){var n=0,e=!1;if(t.openTags)for(;!1===e&&n<t.openTags.length;)e=t.openTags[n]===this.id&&n,n++;else e=!1;return e},r.TagButton.prototype.callback=function(t,n,e){var o,a,i,s,u,c,l=this,r=n.value,d=r?l.tagEnd:"";document.selection?(n.focus(),0<(c=document.selection.createRange()).text.length?l.tagEnd?c.text=l.tagStart+c.text+d:c.text=c.text+l.tagStart:l.tagEnd?!1===l.isOpen(e)?(c.text=l.tagStart,l.openTag(t,e)):(c.text=d,l.closeTag(t,e)):c.text=l.tagStart,n.focus()):n.selectionStart||0===n.selectionStart?(o=n.selectionStart,i=a=n.selectionEnd,s=n.scrollTop,u=r.substring(0,o),c=r.substring(a,r.length),r=r.substring(o,a),o!==a?l.tagEnd?(n.value=u+l.tagStart+r+d+c,i+=l.tagStart.length+d.length):(n.value=u+r+l.tagStart+c,i+=l.tagStart.length):l.tagEnd?!1===l.isOpen(e)?(n.value=u+l.tagStart+c,l.openTag(t,e),i=o+l.tagStart.length):(n.value=u+d+c,i=o+d.length,l.closeTag(t,e)):(n.value=u+l.tagStart+c,i=o+l.tagStart.length),n.focus(),n.selectionStart=i,n.selectionEnd=i,n.scrollTop=s):(d?!1!==l.isOpen(e)?(n.value+=l.tagStart,l.openTag(t,e)):(n.value+=d,l.closeTag(t,e)):n.value+=l.tagStart,n.focus())},r.SpellButton=function(){},r.CloseButton=function(){r.Button.call(this,"close",quicktagsL10n.closeTags,"",quicktagsL10n.closeAllOpenTags)},r.CloseButton.prototype=new r.Button,r._close=function(t,n,e){var o,a,i=e.openTags;if(i)for(;0<i.length;)o=e.getButton(i[i.length-1]),a=document.getElementById(e.name+"_"+o.id),t?o.callback.call(o,a,n,e):o.closeTag(a,e)},r.CloseButton.prototype.callback=r._close,r.closeAllTags=function(t){t=this.getInstance(t);r._close("",t.canvas,t)},r.LinkButton=function(){r.TagButton.call(this,"link","link","","</a>","a")},r.LinkButton.prototype=new r.TagButton,r.LinkButton.prototype.callback=function(t,n,e,o){"undefined"==typeof wpLink?(o=o||"http://",!1===this.isOpen(e)?(o=prompt(quicktagsL10n.enterURL,o))&&(this.tagStart='<a href="'+o+'">',r.TagButton.prototype.callback.call(this,t,n,e)):r.TagButton.prototype.callback.call(this,t,n,e)):wpLink.open(e.id)},r.ImgButton=function(){r.TagButton.call(this,"img","img","","","m")},r.ImgButton.prototype=new r.TagButton,r.ImgButton.prototype.callback=function(t,n,e,o){o=o||"http://";var a=prompt(quicktagsL10n.enterImageURL,o);a&&(o=prompt(quicktagsL10n.enterImageDescription,""),this.tagStart='<img src="'+a+'" alt="'+o+'" />',r.TagButton.prototype.callback.call(this,t,n,e))},r.FullscreenButton=function(){r.Button.call(this,"fullscreen",quicktagsL10n.fullscreen,"f",quicktagsL10n.toggleFullscreen)},r.FullscreenButton.prototype=new r.Button,r.FullscreenButton.prototype.callback=function(t,n){n.id&&"undefined"!=typeof wp&&wp.editor&&wp.editor.fullscreen&&wp.editor.fullscreen.on()},r.TextDirectionButton=function(){r.Button.call(this,"textdirection",quicktagsL10n.textdirection,"",quicktagsL10n.toggleTextdirection)},r.TextDirectionButton.prototype=new r.Button,r.TextDirectionButton.prototype.callback=function(t,n){var e="rtl"===document.getElementsByTagName("html")[0].dir,o=(o=n.style.direction)||(e?"rtl":"ltr");n.style.direction="rtl"===o?"ltr":"rtl",n.focus()},edButtons[10]=new r.TagButton("strong","b","<strong>","</strong>","b"),edButtons[20]=new r.TagButton("em","i","<em>","</em>","i"),edButtons[30]=new r.LinkButton,edButtons[40]=new r.TagButton("block","b-quote","\n\n<blockquote>","</blockquote>\n\n","q"),edButtons[50]=new r.TagButton("del","del",'<del datetime="'+n+'">',"</del>","d"),edButtons[60]=new r.TagButton("ins","ins",'<ins datetime="'+n+'">',"</ins>","s"),edButtons[70]=new r.ImgButton,edButtons[80]=new r.TagButton("ul","ul","<ul>\n","</ul>\n\n","u"),edButtons[90]=new r.TagButton("ol","ol","<ol>\n","</ol>\n\n","o"),edButtons[100]=new r.TagButton("li","li","\t<li>","</li>\n","l"),edButtons[110]=new r.TagButton("code","code","<code>","</code>","c"),edButtons[120]=new r.TagButton("more","more","\x3c!--more--\x3e\n\n","","t"),edButtons[140]=new r.CloseButton}();