tinymce.PluginManager.add("wpfullscreen",function(c){var e=c.settings,o=0;function s(e){var t,n=c.getDoc().body,l=tinymce.DOM,i=250;e&&"setcontent"===e.type&&e.initial||c.settings.inline||(250<(t=tinymce.Env.ie?n.scrollHeight:tinymce.Env.webkit&&0===n.clientHeight?0:n.offsetHeight)&&(i=t),n.scrollTop=0,i!==o&&(n=i-o,l.setStyle(l.get(c.id+"_ifr"),"height",i+"px"),o=i,tinymce.isWebKit&&n<0&&s(e)))}function t(){e.wp_fullscreen=!0,c.dom.addClass(c.getDoc().documentElement,"wp-fullscreen"),c.on("change setcontent paste keyup",s)}function n(){"undefined"!=typeof wp&&wp.editor&&wp.editor.fullscreen&&(c.getParam("wp_fullscreen")?wp.editor.fullscreen.off():wp.editor.fullscreen.on())}c.addCommand("wpAutoResize",s),c.addCommand("wpFullScreenOn",t),c.addCommand("wpFullScreenOff",function(){e.wp_fullscreen=!1,c.dom.removeClass(c.getDoc().documentElement,"wp-fullscreen"),c.off("change setcontent paste keyup",s),o=0}),c.addCommand("wpFullScreen",n),c.on("init",function(){c.getParam("wp_fullscreen")&&t(),c.addShortcut("alt+shift+w","","wpFullScreen")}),c.addButton("wp_fullscreen",{tooltip:"Distraction Free Writing",shortcut:"Alt+Shift+W",onclick:n,classes:"wp-fullscreen btn widget"}),c.addMenuItem("wp_fullscreen",{text:"Distraction Free Writing",icon:"wp_fullscreen",shortcut:"Alt+Shift+W",context:"view",onclick:n})});