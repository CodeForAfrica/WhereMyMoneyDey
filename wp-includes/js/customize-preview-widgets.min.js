!function(e,d){var t,r;e&&e.customize&&((t=e.customize).WidgetCustomizerPreview={renderedSidebars:{},renderedWidgets:{},registeredSidebars:[],registeredWidgets:{},widgetSelectors:[],preview:null,l10n:{},init:function(){var e=this;this.buildWidgetSelectors(),this.highlightControls(),this.preview.bind("active",function(){e.preview.send("rendered-sidebars",e.renderedSidebars),e.preview.send("rendered-widgets",e.renderedWidgets)}),this.preview.bind("highlight-widget",e.highlightWidget)},buildWidgetSelectors:function(){var r=this;d.each(this.registeredSidebars,function(e,i){var t=[i.before_widget.replace("%1$s","").replace("%2$s",""),i.before_title,i.after_title,i.after_widget].join(""),i=d(t),t=i.prop("tagName"),i=i.prop("className");i&&((i=i.replace(/^\s+|\s+$/g,""))&&(t+="."+i.split(/\s+/).join(".")),r.widgetSelectors.push(t))})},highlightWidget:function(e){var i=d(document.body),t=d("#"+e);i.find(".widget-customizer-highlighted-widget").removeClass("widget-customizer-highlighted-widget"),t.addClass("widget-customizer-highlighted-widget"),setTimeout(function(){t.removeClass("widget-customizer-highlighted-widget")},500)},highlightControls:function(){var i=this,e=this.widgetSelectors.join(",");d(e).attr("title",this.l10n.widgetTooltip),d(document).on("mouseenter",e,function(){i.preview.send("highlight-widget-control",d(this).prop("id"))}),d(document).on("click",e,function(e){e.shiftKey&&(e.preventDefault(),i.preview.send("focus-widget-control",d(this).prop("id")))})}},r=t.Preview,t.Preview=r.extend({initialize:function(e,i){t.WidgetCustomizerPreview.preview=this,r.prototype.initialize.call(this,e,i)}}),d(function(){var e=window._wpWidgetCustomizerPreviewSettings;e&&(d.extend(t.WidgetCustomizerPreview,e),t.WidgetCustomizerPreview.init())}))}(window.wp,jQuery);