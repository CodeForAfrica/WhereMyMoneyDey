!function(i,e){var t={options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0},_create:function(){var o,t;i.support.iris&&(t=(o=this).element,i.extend(o.options,t.data()),o.initialValue=t.val(),t.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />'),o.wrap=t.parent(),o.toggler=i('<a tabindex="0" class="wp-color-result" />').insertBefore(t).css({backgroundColor:o.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),o.pickerContainer=i('<div class="wp-picker-holder" />').insertAfter(t),o.button=i('<input type="button" class="button button-small hidden" />'),o.options.defaultColor?o.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):o.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),t.wrap('<span class="wp-picker-input-wrap" />').after(o.button),t.iris({target:o.pickerContainer,hide:!0,width:255,mode:"hsv",palettes:o.options.palettes,change:function(t,e){o.toggler.css({backgroundColor:e.color.toString()}),i.isFunction(o.options.change)&&o.options.change.call(this,t,e)}}),t.val(o.initialValue),o._addListeners(),o.options.hide||o.toggler.click())},_addListeners:function(){var o=this;o.toggler.click(function(t){t.stopPropagation(),o.element.toggle().iris("toggle"),o.button.toggleClass("hidden"),o.toggler.toggleClass("wp-picker-open"),o.toggler.hasClass("wp-picker-open")?i("body").on("click",{wrap:o.wrap,toggler:o.toggler},o._bodyListener):i("body").off("click",o._bodyListener)}),o.element.change(function(t){var e=i(this).val();""!==e&&"#"!==e||(o.toggler.css("backgroundColor",""),i.isFunction(o.options.clear)&&o.options.clear.call(this,t))}),o.toggler.on("keyup",function(t){13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),o.toggler.trigger("click").next().focus())}),o.button.click(function(t){var e=i(this);e.hasClass("wp-picker-clear")?(o.element.val(""),o.toggler.css("backgroundColor",""),i.isFunction(o.options.clear)&&o.options.clear.call(this,t)):e.hasClass("wp-picker-default")&&o.element.val(o.options.defaultColor).change()})},_bodyListener:function(t){t.data.wrap.find(t.target).length||t.data.toggler.click()},color:function(t){if(t===e)return this.element.iris("option","color");this.element.iris("option","color",t)},defaultColor:function(t){if(t===e)return this.options.defaultColor;this.options.defaultColor=t}};i.widget("wp.wpColorPicker",t)}(jQuery);