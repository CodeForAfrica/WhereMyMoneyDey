var inlineEditPost;!function(c){inlineEditPost={init:function(){var i=this,t=c("#inline-edit"),e=c("#bulk-edit");i.type=c("table.widefat").hasClass("pages")?"page":"post",i.what="#post-",t.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),e.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),c("a.cancel",t).click(function(){return inlineEditPost.revert()}),c("a.save",t).click(function(){return inlineEditPost.save(this)}),c("td",t).keydown(function(t){if(13===t.which)return inlineEditPost.save(this)}),c("a.cancel",e).click(function(){return inlineEditPost.revert()}),c('#inline-edit .inline-edit-private input[value="private"]').click(function(){var t=c("input.inline-edit-password-input");c(this).prop("checked")?t.val("").prop("disabled",!0):t.prop("disabled",!1)}),c("#the-list").on("click","a.editinline",function(){return inlineEditPost.edit(this),!1}),c("#bulk-title-div").parents("fieldset").after(c("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend(c("#inline-edit label.inline-edit-tags").clone()),c('select[name="_status"] option[value="future"]',e).remove(),c("#doaction, #doaction2").click(function(t){var e=c(this).attr("id").substr(2);"edit"===c('select[name="'+e+'"]').val()?(t.preventDefault(),i.setBulk()):0<c("form#posts-filter tr.inline-editor").length&&i.revert()})},toggle:function(t){var e=this;"none"===c(e.what+e.getId(t)).css("display")?e.revert():e.edit(t)},setBulk:function(){var i="",t=this.type,n=!0;if(this.revert(),c("#bulk-edit td").attr("colspan",c(".widefat:first thead th:visible").length),c("table.widefat tbody").prepend(c("#bulk-edit")),c("#bulk-edit").addClass("inline-editor").show(),c('tbody th.check-column input[type="checkbox"]').each(function(){var t,e;c(this).prop("checked")&&(n=!1,t=c(this).val(),e=c("#inline_"+t+" .post_title").html()||inlineEditL10n.notitle,i+='<div id="ttle'+t+'"><a id="_'+t+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+e+"</div>")}),n)return this.revert();c("#bulk-titles").html(i),c("#bulk-titles a").click(function(){var t=c(this).attr("id").substr(1);c('table.widefat input[value="'+t+'"]').prop("checked",!1),c("#ttle"+t).remove()}),"post"===t&&c('tr.inline-editor textarea[name="tax_input['+(t="post_tag")+']"]').suggest(ajaxurl+"?action=ajax-tag-search&tax="+t,{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma+" "}),c("html, body").animate({scrollTop:0},"fast")},edit:function(a){var t,s,e,i,n,l,o,r,d=this,p=!0;for(d.revert(),"object"==typeof a&&(a=d.getId(a)),t=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order"],"page"===d.type&&t.push("post_parent","page_template"),s=c("#inline-edit").clone(!0),c("td",s).attr("colspan",c(".widefat:first thead th:visible").length),c(d.what+a).hasClass("alternate")&&c(s).addClass("alternate"),c(d.what+a).hide().after(s),e=c("#inline_"+a),c(':input[name="post_author"] option[value="'+c(".post_author",e).text()+'"]',s).val()||c(':input[name="post_author"]',s).prepend('<option value="'+c(".post_author",e).text()+'">'+c("#"+d.type+"-"+a+" .author").text()+"</option>"),1===c(':input[name="post_author"] option',s).length&&c("label.inline-edit-author",s).hide(),o=c(".post_format",e).text(),c("option.unsupported",s).each(function(){var t=c(this);t.val()!==o&&t.remove()}),r=0;r<t.length;r++)c(':input[name="'+t[r]+'"]',s).val(c("."+t[r],e).text());if("open"===c(".comment_status",e).text()&&c('input[name="comment_status"]',s).prop("checked",!0),"open"===c(".ping_status",e).text()&&c('input[name="ping_status"]',s).prop("checked",!0),"sticky"===c(".sticky",e).text()&&c('input[name="sticky"]',s).prop("checked",!0),c(".post_category",e).each(function(){var t,e=c(this).text();e&&(t=c(this).attr("id").replace("_"+a,""),c("ul."+t+"-checklist :checkbox",s).val(e.split(",")))}),c(".tags_input",e).each(function(){var t=c(this).text(),e=c(this).attr("id").replace("_"+a,""),i=c("textarea.tax_input_"+e,s),n=inlineEditL10n.comma;t&&(","!==n&&(t=t.replace(/,/g,n)),i.val(t)),i.suggest(ajaxurl+"?action=ajax-tag-search&tax="+e,{delay:500,minchars:2,multiple:!0,multipleSep:inlineEditL10n.comma+" "})}),"future"!==(d=c("._status",e).text())&&c('select[name="_status"] option[value="future"]',s).remove(),"private"===d&&(c('input[name="keep_private"]',s).prop("checked",!0),c("input.inline-edit-password-input").val("").prop("disabled",!0)),0<(i=c('select[name="post_parent"] option[value="'+a+'"]',s)).length){for(n=i[0].className.split("-")[1],l=i;p&&0!==(l=l.next("option")).length;)l[0].className.split("-")[1]<=n?p=!1:(l.remove(),l=i);i.remove()}return c(s).attr("id","edit-"+a).addClass("inline-editor").show(),c(".ptitle",s).focus(),!1},save:function(e){var t=c(".post_status_page").val()||"";return"object"==typeof e&&(e=this.getId(e)),c("table.widefat .spinner").show(),t={action:"inline-save",post_type:typenow,post_ID:e,edit_date:"true",post_status:t},t=c("#edit-"+e).find(":input").serialize()+"&"+c.param(t),c.post(ajaxurl,t,function(t){c("table.widefat .spinner").hide(),t?-1!==t.indexOf("<tr")?(c(inlineEditPost.what+e).remove(),c("#edit-"+e).before(t).remove(),c(inlineEditPost.what+e).hide().fadeIn()):(t=t.replace(/<.[^<>]*?>/g,""),c("#edit-"+e+" .inline-edit-save .error").html(t).show()):c("#edit-"+e+" .inline-edit-save .error").html(inlineEditL10n.error).show(),c("#post-"+e).prev().hasClass("alternate")&&c("#post-"+e).removeClass("alternate")},"html"),!1},revert:function(){var t=c("table.widefat tr.inline-editor").attr("id");return t&&(c("table.widefat .spinner").hide(),"bulk-edit"===t?(c("table.widefat #bulk-edit").removeClass("inline-editor").hide(),c("#bulk-titles").html(""),c("#inlineedit").append(c("#bulk-edit"))):(c("#"+t).remove(),t=t.substr(t.lastIndexOf("-")+1),c(this.what+t).show())),!1},getId:function(t){t=c(t).closest("tr").attr("id").split("-");return t[t.length-1]}},c(document).ready(function(){inlineEditPost.init()}),c(document).on("heartbeat-tick.wp-check-locked-posts",function(t,e){var n=e["wp-check-locked-posts"]||{};c("#the-list tr").each(function(t,e){var i=e.id,e=c(e);n.hasOwnProperty(i)?e.hasClass("wp-locked")||(i=n[i],e.find(".column-title .locked-text").text(i.text),e.find(".check-column checkbox").prop("checked",!1),i.avatar_src&&(i=c('<img class="avatar avatar-18 photo" width="18" height="18" />').attr("src",i.avatar_src.replace(/&amp;/g,"&")),e.find(".column-title .locked-avatar").empty().append(i)),e.addClass("wp-locked")):e.hasClass("wp-locked")&&e.removeClass("wp-locked").delay(1e3).find(".locked-info span").empty()})}).on("heartbeat-send.wp-check-locked-posts",function(t,e){var i=[];c("#the-list tr").each(function(t,e){e.id&&i.push(e.id)}),i.length&&(e["wp-check-locked-posts"]=i)}).ready(function(){"undefined"!=typeof wp&&wp.heartbeat&&wp.heartbeat.interval(15)})}(jQuery);